import{_ as l,c as n,a as s,o as i}from"./app-D-_X-8Qp.js";const a={};function t(r,e){return i(),n("div",null,e[0]||(e[0]=[s(`<h1 id="siliconflow-tts-服务配置指南" tabindex="-1"><a class="header-anchor" href="#siliconflow-tts-服务配置指南"><span>SiliconFlow TTS 服务配置指南</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>本指南将帮助您配置和使用 SiliconFlow 提供的 TTS (Text-to-Speech) 服务。SiliconFlow TTS 服务基于 FunAudioLLM/CosyVoice2-0.5B 模型，提供高质量的语音合成功能。</p><h2 id="前置要求" tabindex="-1"><a class="header-anchor" href="#前置要求"><span>前置要求</span></a></h2><ul><li>Python 3.7+</li><li>requests 库</li><li>有效的 SiliconFlow API 密钥</li></ul><h2 id="环境变量配置" tabindex="-1"><a class="header-anchor" href="#环境变量配置"><span>环境变量配置</span></a></h2><p>在使用 SiliconFlow TTS 服务之前，您需要配置以下环境变量：</p><table><thead><tr><th>环境变量</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>TTS_SERVICE_METHOD</code></td><td><code>siliconflow</code></td><td>TTS 服务类型，设置为 <code>siliconflow</code></td></tr><tr><td><code>TTS_SERVICE_URL_SiliconFlow</code></td><td><code>https://api.siliconflow.cn/v1</code></td><td>SiliconFlow API 基础URL</td></tr><tr><td><code>TTS_SERVICE_API_KEY</code></td><td>无</td><td><strong>必需</strong> - 您的 SiliconFlow API 密钥</td></tr></tbody></table><h3 id="配置示例" tabindex="-1"><a class="header-anchor" href="#配置示例"><span>配置示例</span></a></h3><p><strong>Windows (.env 文件)</strong></p><div class="language-env line-numbers-mode" data-highlighter="prismjs" data-ext="env"><pre><code><span class="line">TTS_SERVICE_METHOD=siliconflow</span>
<span class="line">TTS_SERVICE_URL_SiliconFlow=https://api.siliconflow.cn/v1</span>
<span class="line">TTS_SERVICE_API_KEY=your_api_key_here</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Linux/macOS (环境变量)</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">TTS_SERVICE_METHOD</span><span class="token operator">=</span>siliconflow</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">TTS_SERVICE_URL_SiliconFlow</span><span class="token operator">=</span>https://api.siliconflow.cn/v1</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">TTS_SERVICE_API_KEY</span><span class="token operator">=</span>your_api_key_here</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="功能特性" tabindex="-1"><a class="header-anchor" href="#功能特性"><span>功能特性</span></a></h2><h3 id="_1-自定义音色管理" tabindex="-1"><a class="header-anchor" href="#_1-自定义音色管理"><span>1. 自定义音色管理</span></a></h3><ul><li><strong>自动加载远程音色</strong>：启动时自动获取已上传的自定义音色列表</li><li><strong>本地音色上传</strong>：自动扫描并上传 <code>data/ref_audio/</code> 目录下的音频文件</li><li><strong>音色缓存</strong>：避免重复上传相同的音色文件</li></ul><h3 id="_2-支持的音频格式" tabindex="-1"><a class="header-anchor" href="#_2-支持的音频格式"><span>2. 支持的音频格式</span></a></h3><ul><li><strong>输入格式</strong>：WAV 文件（用于音色训练）</li><li><strong>输出格式</strong>：WAV, MP3, PCM, OPUS</li><li><strong>采样率</strong>：支持多种采样率配置</li></ul><h3 id="_3-目录结构" tabindex="-1"><a class="header-anchor" href="#_3-目录结构"><span>3. 目录结构</span></a></h3><p>确保您的项目具有以下目录结构：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">project/</span>
<span class="line">├── data/</span>
<span class="line">│   └── ref_audio/</span>
<span class="line">│       ├── character1.wav        # 音色音频文件</span>
<span class="line">│       ├── character1.txt        # 对应的参考文本</span>
<span class="line">│       ├── character2.wav</span>
<span class="line">│       ├── character2.txt</span>
<span class="line">│       └── ...</span>
<span class="line">├── ttsapi_service.py</span>
<span class="line">└── utils/</span>
<span class="line">    └── env_utils.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义音色配置" tabindex="-1"><a class="header-anchor" href="#自定义音色配置"><span>自定义音色配置</span></a></h2><h3 id="_1-准备音频文件" tabindex="-1"><a class="header-anchor" href="#_1-准备音频文件"><span>1. 准备音频文件</span></a></h3><p>在 <code>data/ref_audio/</code> 目录下放置您的音色文件：</p><ul><li><strong>音频文件</strong>：格式为 <code>.wav</code>，文件名为音色名称（如 <code>alice.wav</code>）</li><li><strong>文本文件</strong>：格式为 <code>.txt</code>，文件名与音频文件对应（如 <code>alice.txt</code>）</li></ul><h3 id="_2-参考文本要求" tabindex="-1"><a class="header-anchor" href="#_2-参考文本要求"><span>2. 参考文本要求</span></a></h3><p>文本文件应包含与音频对应的文字内容，如果文件不存在或为空，系统将使用默认文本：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">在一无所知中, 梦里的一天结束了，一个新的轮回便会开始</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-自动上传流程" tabindex="-1"><a class="header-anchor" href="#_3-自动上传流程"><span>3. 自动上传流程</span></a></h3><p>系统启动时会自动：</p><ol><li>扫描 <code>data/ref_audio/</code> 目录</li><li>检查音色是否已存在（基于 MD5 哈希）</li><li>上传新的音色到 SiliconFlow 平台</li><li>更新本地音色列表</li></ol><h2 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理"><span>错误处理</span></a></h2><h3 id="常见问题及解决方案" tabindex="-1"><a class="header-anchor" href="#常见问题及解决方案"><span>常见问题及解决方案</span></a></h3><ol><li><p><strong>API 密钥未设置</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">ValueError: TTS_SERVICE_API_KEY 未设置，请配置环境变量。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>解决方案</strong>：检查并正确设置 <code>TTS_SERVICE_API_KEY</code> 环境变量</p></li><li><p><strong>音色上传失败</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">❌ 上传音色失败 [character_name]: 400, Bad Request</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>解决方案</strong>：</p><ul><li>检查音频文件格式（必须是 WAV）</li><li>确认参考文本内容正确</li><li>验证 API 密钥权限</li></ul></li><li><p><strong>TTS 生成失败</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">TTS 请求失败: 500, Internal Server Error</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>解决方案</strong>：</p><ul><li>检查网络连接</li><li>验证文本内容是否包含特殊字符</li><li>确认音色名称存在</li></ul></li></ol><h2 id="性能优化建议" tabindex="-1"><a class="header-anchor" href="#性能优化建议"><span>性能优化建议</span></a></h2><ol><li><p><strong>音色管理</strong></p><ul><li>合理控制音色数量，避免过多占用存储</li><li>定期清理不使用的音色</li></ul></li><li><p><strong>请求优化</strong></p><ul><li>批量处理短文本可提高效率</li><li>避免过长的单次文本输入</li></ul></li><li><p><strong>缓存策略</strong></p><ul><li>对相同文本和参数的请求考虑实现本地缓存</li><li>音频文件可压缩存储以节省空间</li></ul></li></ol><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ol><li><strong>API 限制</strong>：请遵守 SiliconFlow 的 API 调用频率限制</li><li><strong>音频质量</strong>：上传的参考音频质量会直接影响合成效果</li><li><strong>文本长度</strong>：单次请求的文本长度建议控制在合理范围内</li><li><strong>网络环境</strong>：确保服务器能够正常访问 SiliconFlow API</li></ol><h2 id="故障排查" tabindex="-1"><a class="header-anchor" href="#故障排查"><span>故障排查</span></a></h2><p>如果遇到问题，请按以下步骤排查：</p><ol><li><strong>检查环境变量配置</strong></li><li><strong>验证 API 密钥有效性</strong></li><li><strong>确认网络连接正常</strong></li><li><strong>查看详细错误日志</strong></li><li><strong>检查音频文件格式和内容</strong></li></ol><p>通过以上配置和使用方法，您可以充分利用 SiliconFlow TTS 服务的强大功能，为您的应用添加高质量的语音合成能力。</p>`,42)]))}const o=l(a,[["render",t]]),c=JSON.parse('{"path":"/deploy-docs/TTS_SIL.html","title":"SiliconFlow TTS 服务配置指南","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"SiliconFlow TTS 服务配置指南","description":"SiliconFlow TTS 语音合成服务的配置和使用指南"},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"前置要求","slug":"前置要求","link":"#前置要求","children":[]},{"level":2,"title":"环境变量配置","slug":"环境变量配置","link":"#环境变量配置","children":[{"level":3,"title":"配置示例","slug":"配置示例","link":"#配置示例","children":[]}]},{"level":2,"title":"功能特性","slug":"功能特性","link":"#功能特性","children":[{"level":3,"title":"1. 自定义音色管理","slug":"_1-自定义音色管理","link":"#_1-自定义音色管理","children":[]},{"level":3,"title":"2. 支持的音频格式","slug":"_2-支持的音频格式","link":"#_2-支持的音频格式","children":[]},{"level":3,"title":"3. 目录结构","slug":"_3-目录结构","link":"#_3-目录结构","children":[]}]},{"level":2,"title":"自定义音色配置","slug":"自定义音色配置","link":"#自定义音色配置","children":[{"level":3,"title":"1. 准备音频文件","slug":"_1-准备音频文件","link":"#_1-准备音频文件","children":[]},{"level":3,"title":"2. 参考文本要求","slug":"_2-参考文本要求","link":"#_2-参考文本要求","children":[]},{"level":3,"title":"3. 自动上传流程","slug":"_3-自动上传流程","link":"#_3-自动上传流程","children":[]}]},{"level":2,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[{"level":3,"title":"常见问题及解决方案","slug":"常见问题及解决方案","link":"#常见问题及解决方案","children":[]}]},{"level":2,"title":"性能优化建议","slug":"性能优化建议","link":"#性能优化建议","children":[]},{"level":2,"title":"注意事项","slug":"注意事项","link":"#注意事项","children":[]},{"level":2,"title":"故障排查","slug":"故障排查","link":"#故障排查","children":[]}],"git":{"updatedTime":1754323398000,"contributors":[{"name":"2302_76329346","username":"","email":"2302_76329346@noreply.gitcode.com","commits":1}],"changelog":[{"hash":"9e7634fdfab34f2e51ac081bc14aae8eff3bb887","time":1754323398000,"email":"2302_76329346@noreply.gitcode.com","author":"2302_76329346","message":"更新文档：为多个部署指南添加语言、标题和描述信息"}]},"filePathRelative":"deploy-docs/TTS_SIL.md"}');export{o as comp,c as data};
