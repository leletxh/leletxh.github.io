<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>快速开始 | CABM</title><meta name="description" content="CABM 项目的快速开始指南，包含安装说明和使用教程">
    <link rel="preload" href="/assets/style-B3-VMakp.css" as="style"><link rel="stylesheet" href="/assets/style-B3-VMakp.css">
    <link rel="modulepreload" href="/assets/app-DUMTNEXb.js"><link rel="modulepreload" href="/assets/get-started.html-Dtm84XAB.js">
    <link rel="prefetch" href="/assets/CONTRIBUTING.html-Ba_SXSrL.js" as="script"><link rel="prefetch" href="/assets/index.html-CywOnBU8.js" as="script"><link rel="prefetch" href="/assets/DOCKER_PULL_GUIDE.html-DPIisJWc.js" as="script"><link rel="prefetch" href="/assets/TTS_GPTSoVITS.html-u0cx_LFK.js" as="script"><link rel="prefetch" href="/assets/TTS_SIL.html-MmWm6VIM.js" as="script"><link rel="prefetch" href="/assets/WINDOWS_DEPLOY_GUIDE.html-QXwZD-te.js" as="script"><link rel="prefetch" href="/assets/404.html-Bh__09HC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="CABM"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">CABM</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="CABM"><!--[--><!--[--><!--]--><!--]-->CABM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/get-started.html" aria-label="快速开始"><!--[--><!--[--><!--]--><!--]-->快速开始<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="CABM"><!--[--><!--[--><!--]--><!--]-->CABM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/get-started.html" aria-label="快速开始"><!--[--><!--[--><!--]--><!--]-->快速开始<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">快速开始 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始"><span>快速开始</span></a></h1><p>&quot;当灵性注入载体，它便挣脱物质躯壳，抵达超验之境。&quot;</p><p><s>（不就是个Gal吗）</s></p><blockquote><h2 id="⚠️-注意-本项目目前处于开发阶段-核心功能尚未实现-其他的功能和优化也正在进行中。欢迎贡献代码或提出建议。" tabindex="-1"><a class="header-anchor" href="#⚠️-注意-本项目目前处于开发阶段-核心功能尚未实现-其他的功能和优化也正在进行中。欢迎贡献代码或提出建议。"><span><strong>⚠️ 注意：本项目目前处于开发阶段，核心功能尚未实现，其他的功能和优化也正在进行中。欢迎贡献代码或提出建议。</strong></span></a></h2></blockquote><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录"><span>目录</span></a></h2><nav class="table-of-contents"><ul><li><a aria-current="page" href="/get-started.html#目录" class="router-link-active router-link-exact-active">目录</a></li><li><a aria-current="page" href="/get-started.html#开发状态" class="router-link-active router-link-exact-active">开发状态</a></li><li><a aria-current="page" href="/get-started.html#项目简介" class="router-link-active router-link-exact-active">项目简介</a></li><li><a aria-current="page" href="/get-started.html#声明" class="router-link-active router-link-exact-active">声明</a></li><li><a aria-current="page" href="/get-started.html#功能特点" class="router-link-active router-link-exact-active">功能特点</a></li><li><a aria-current="page" href="/get-started.html#安装说明" class="router-link-active router-link-exact-active">安装说明</a><ul><li><a aria-current="page" href="/get-started.html#🐳-docker-快速部署-推荐" class="router-link-active router-link-exact-active">🐳 Docker 快速部署（推荐）</a></li><li><a aria-current="page" href="/get-started.html#📦-conda安装方式" class="router-link-active router-link-exact-active">📦 conda安装方式</a></li><li><a aria-current="page" href="/get-started.html#📦-传统安装方式" class="router-link-active router-link-exact-active">📦 传统安装方式</a></li><li><a aria-current="page" href="/get-started.html#🚀-docker-优势" class="router-link-active router-link-exact-active">🚀 Docker 优势</a></li><li><a aria-current="page" href="/get-started.html#📋-环境要求" class="router-link-active router-link-exact-active">📋 环境要求</a></li></ul></li><li><a aria-current="page" href="/get-started.html#使用说明" class="router-link-active router-link-exact-active">使用说明</a><ul><li><a aria-current="page" href="/get-started.html#启动应用" class="router-link-active router-link-exact-active">启动应用</a></li><li><a aria-current="page" href="/get-started.html#基本操作" class="router-link-active router-link-exact-active">基本操作</a></li></ul></li><li><a aria-current="page" href="/get-started.html#注意事项" class="router-link-active router-link-exact-active">注意事项</a></li><li><a aria-current="page" href="/get-started.html#自定义角色" class="router-link-active router-link-exact-active">自定义角色</a></li><li><a aria-current="page" href="/get-started.html#贡献-按周结算没有并不代表没有" class="router-link-active router-link-exact-active">贡献，按周结算没有并不代表没有</a></li><li><a aria-current="page" href="/get-started.html#📚-文档索引" class="router-link-active router-link-exact-active">📚 文档索引</a><ul><li><a aria-current="page" href="/get-started.html#部署文档" class="router-link-active router-link-exact-active">部署文档</a></li><li><a aria-current="page" href="/get-started.html#功能文档" class="router-link-active router-link-exact-active">功能文档</a></li><li><a aria-current="page" href="/get-started.html#开发文档" class="router-link-active router-link-exact-active">开发文档</a></li></ul></li><li><a aria-current="page" href="/get-started.html#许可证" class="router-link-active router-link-exact-active">许可证</a></li></ul></nav><h2 id="开发状态" tabindex="-1"><a class="header-anchor" href="#开发状态"><span>开发状态</span></a></h2><p><strong>已完成功能：</strong></p><ul><li>基本的AI对话功能，包含最近的历史记录</li><li>前端的主页面（但是极简风）</li><li>角色系统（可切换不同角色）</li><li>分段流式输出（灵魂所在~）</li><li>记忆系统（使用向量数据库长期保存记忆）</li><li>AI生成选项</li><li>角色的表情（后面或许会换成3D模型）</li><li><s>语音输入</s>（问题太多了，目前几乎用不了）</li><li>很多的bug</li></ul><p><strong>正在开发：</strong></p><ul><li>用户画像（角色对用户的印象）</li><li>场景切换（让AI切换场景或生成新场景）</li><li>故事模式（根据大纲推动故事发展，区别于“闲聊模式”）</li><li>角色的自我认知</li><li>角色动作</li><li>更多的角色</li><li><s>记忆权重，记忆遗忘</s>（意义不大，暂不考虑）</li><li>更多的bug</li></ul><h2 id="项目简介" tabindex="-1"><a class="header-anchor" href="#项目简介"><span>项目简介</span></a></h2><p>CABM是一个AI对话应用，具有动态生成的背景图片功能。用户可以与AI模型进行对话交流，同时应用会使用图像生成模型创建的图片作为动态背景，提供更丰富的视觉体验。应用支持多角色系统，可以切换不同的AI角色进行对话。</p><p><s>人话：AI驱动的Galgame</s></p><h2 id="声明" tabindex="-1"><a class="header-anchor" href="#声明"><span>声明</span></a></h2><ul><li>本项目为个人非营利性兴趣项目，无意且不参与任何形式的同业竞争。</li><li>本项目采用GNU通用公共许可证(GPL)开源协议，禁止闭源商业化改造。详见<a href="LICENSE">GNU General Public License v3.0</a></li><li>使用者需自行承担因调用第三方AI服务产生的API费用，此类费用与项目作者无关</li><li>本项目涉及人工智能生成内容，作者不对AI生成内容的准确性、合法性及可能引发的后果承担任何责任。</li><li>欢迎提出建设性意见或提交Pull Requests，但作者保留是否采纳的最终决定权，建议提前和作者联系。</li><li>作者保留对本声明条款的最终解释权及修改权。</li></ul><h2 id="功能特点" tabindex="-1"><a class="header-anchor" href="#功能特点"><span>功能特点</span></a></h2><ul><li>与AI模型进行自然对话，支持流式输出（打字机效果）</li><li>多角色系统，可切换不同的AI角色</li><li>动态生成背景图片，提供沉浸式体验</li><li>角色立绘显示，增强视觉效果</li><li>对话历史记录查看</li><li>响应式设计，适配不同设备</li></ul><h2 id="安装说明" tabindex="-1"><a class="header-anchor" href="#安装说明"><span>安装说明</span></a></h2><h3 id="🐳-docker-快速部署-推荐" tabindex="-1"><a class="header-anchor" href="#🐳-docker-快速部署-推荐"><span>🐳 Docker 快速部署（推荐）</span></a></h3><h4 id="🚀-直接拉取镜像部署-最简单" tabindex="-1"><a class="header-anchor" href="#🚀-直接拉取镜像部署-最简单"><span>🚀 直接拉取镜像部署（最简单）</span></a></h4><p>无需克隆代码，直接使用预构建镜像：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># Linux/macOS 一键部署</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-o</span> deploy.sh https://raw.githubusercontent.com/xhc2008/CABM/main/deploy.sh</span>
<span class="line highlighted"><span class="token function">chmod</span> +x deploy.sh</span>
<span class="line">./deploy.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell"><pre><code><span class="line"><span class="token comment"># Windows PowerShell 一键部署</span></span>
<span class="line"><span class="token function">Invoke-WebRequest</span> <span class="token operator">-</span>Uri <span class="token string">&quot;https://raw.githubusercontent.com/xhc2008/CABM/main/deploy.ps1&quot;</span> <span class="token operator">-</span>OutFile <span class="token string">&quot;deploy.ps1&quot;</span></span>
<span class="line highlighted">PowerShell <span class="token operator">-</span>ExecutionPolicy Bypass <span class="token operator">-</span>File deploy<span class="token punctuation">.</span>ps1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><a class="route-link" href="/deploy-docs/DOCKER_PULL_GUIDE.html">📖 Docker 部署详细文档</a></strong></p><h4 id="源码构建部署" tabindex="-1"><a class="header-anchor" href="#源码构建部署"><span>源码构建部署</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 克隆项目</span></span>
<span class="line"><span class="token function">git</span> clone https://github.com/xhc2008/CABM.git</span>
<span class="line"><span class="token builtin class-name">cd</span> CABM</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 一键部署</span></span>
<span class="line highlighted">./deploy.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="手动部署" tabindex="-1"><a class="header-anchor" href="#手动部署"><span>手动部署</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 1. 配置环境变量</span></span>
<span class="line"><span class="token function">cp</span> .env.docker .env.docker</span>
<span class="line"><span class="token comment"># 编辑 .env.docker 文件，填入你的 API 密钥</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 启动服务</span></span>
<span class="line highlighted">./deploy-docker.sh start</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 访问应用</span></span>
<span class="line"><span class="token comment"># http://localhost:5000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>更多部署选项：</strong></p><ul><li><a class="route-link" href="/deploy-docs/DOCKER_PULL_GUIDE.html">📖 Docker 镜像直接拉取部署指南</a></li></ul><h4 id="docker-管理命令" tabindex="-1"><a class="header-anchor" href="#docker-管理命令"><span>Docker 管理命令</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">./docker-start.sh start      <span class="token comment"># 启动服务</span></span>
<span class="line">./docker-start.sh stop       <span class="token comment"># 停止服务</span></span>
<span class="line">./docker-start.sh restart    <span class="token comment"># 重启服务</span></span>
<span class="line">./docker-start.sh logs       <span class="token comment"># 查看日志</span></span>
<span class="line">./docker-start.sh status     <span class="token comment"># 查看状态</span></span>
<span class="line">./docker-start.sh package    <span class="token comment"># 打包镜像</span></span>
<span class="line">./docker-start.sh cleanup    <span class="token comment"># 清理资源</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="📦-conda安装方式" tabindex="-1"><a class="header-anchor" href="#📦-conda安装方式"><span>📦 conda安装方式</span></a></h3><p>使用conda可以更好地管理Python环境和依赖包，推荐有conda使用经验的用户选择此方式。</p><h4 id="_1-克隆项目" tabindex="-1"><a class="header-anchor" href="#_1-克隆项目"><span>1. 克隆项目</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">git</span> clone https://github.com/xhc2008/CABM.git</span>
<span class="line"><span class="token builtin class-name">cd</span> CABM</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-创建conda环境" tabindex="-1"><a class="header-anchor" href="#_2-创建conda环境"><span>2. 创建conda环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 创建新的conda环境，Python版本3.10+</span></span>
<span class="line">conda create <span class="token parameter variable">-n</span> cabm <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.11</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-激活环境" tabindex="-1"><a class="header-anchor" href="#_3-激活环境"><span>3. 激活环境</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 激活conda环境</span></span>
<span class="line">conda activate cabm</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-安装依赖" tabindex="-1"><a class="header-anchor" href="#_4-安装依赖"><span>4. 安装依赖</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 使用pip安装项目依赖</span></span>
<span class="line">pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>或者如果项目提供了conda环境文件，也可以使用：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">conda <span class="token function">env</span> create <span class="token parameter variable">-f</span> environment.yml <span class="token parameter variable">-p</span> .conda</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_5-配置环境变量" tabindex="-1"><a class="header-anchor" href="#_5-配置环境变量"><span>5. 配置环境变量</span></a></h4><p>按照下方<a href="#_2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">配置环境变量</a>部分的说明进行配置。</p><h4 id="_6-启动应用" tabindex="-1"><a class="header-anchor" href="#_6-启动应用"><span>6. 启动应用</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 确保conda环境已激活</span></span>
<span class="line">conda activate cabm</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 启动应用</span></span>
<span class="line">python start.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="conda环境管理" tabindex="-1"><a class="header-anchor" href="#conda环境管理"><span>conda环境管理</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 激活环境</span></span>
<span class="line">conda activate cabm</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 退出环境</span></span>
<span class="line">conda deactivate</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 删除环境（如需重新安装）</span></span>
<span class="line">conda remove <span class="token parameter variable">-p</span> .conda <span class="token parameter variable">--all</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看已安装的包</span></span>
<span class="line">conda list</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 导出环境配置</span></span>
<span class="line">conda <span class="token function">env</span> <span class="token builtin class-name">export</span> <span class="token operator">&gt;</span> environment.yml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="📦-传统安装方式" tabindex="-1"><a class="header-anchor" href="#📦-传统安装方式"><span>📦 传统安装方式</span></a></h3><h4 id="_1-安装依赖" tabindex="-1"><a class="header-anchor" href="#_1-安装依赖"><span>1. 安装依赖</span></a></h4><p>使用 pip 安装项目依赖：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-配置环境变量" tabindex="-1"><a class="header-anchor" href="#_2-配置环境变量"><span>2. 配置环境变量</span></a></h4><p>复制<code>.env.example</code>文件为<code>.env</code>，并填写API密钥和URL：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">cp</span> .env.example .env</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编辑<code>.env</code>文件，填写API_KEY。 需前往<a href="https://cloud.siliconflow.cn/i/mVqMyTZk" target="_blank" rel="noopener noreferrer">硅基流动平台</a>申请你的API Key； 如果使用其他平台或模型，需要替换对应的API_BASE_URL和MODEL</p><p>编辑<code>.env</code>文件，填写以下信息：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"># 对话API配置</span>
<span class="line">CHAT_API_BASE_URL=https://api.siliconflow.cn/v1</span>
<span class="line highlighted">CHAT_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="line">CHAT_MODEL=deepseek-ai/DeepSeek-V3</span>
<span class="line"></span>
<span class="line"># 图像生成API配置</span>
<span class="line">IMAGE_API_BASE_URL=https://api.siliconflow.cn/v1</span>
<span class="line highlighted">IMAGE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="line">IMAGE_MODEL=Kwai-Kolors/Kolors</span>
<span class="line"></span>
<span class="line"># 嵌入向量API配置</span>
<span class="line">EMBEDDING_API_BASE_URL=https://api.siliconflow.cn/v1</span>
<span class="line highlighted">EMBEDDING_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="line">EMBEDDING_MODEL=BAAI/bge-m3</span>
<span class="line"></span>
<span class="line"># 选项生成API配置</span>
<span class="line">OPTION_API_BASE_URL=https://api.siliconflow.cn/v1</span>
<span class="line highlighted">OPTION_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="line">OPTION_MODEL=Qwen/Qwen3-32B</span>
<span class="line"></span>
<span class="line"># TTS服务配置，使用siliconflow必须将参考音频放入static/audio目录下</span>
<span class="line"># 参考音频文件名为：{角色名}.wav将参考文本放到{角色名}.txt</span>
<span class="line">TTS_SERVICE_URL_GPTSoVITS=http://127.0.0.1:9880</span>
<span class="line">TTS_SERVICE_URL_SiliconFlow=https://api.siliconflow.cn/v1</span>
<span class="line highlighted">TTS_SERVICE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
<span class="line">#填写siliconflow或GPT-SoVITS</span>
<span class="line">TTS_SERVICE_METHOD=siliconflow</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>高亮为必须配置，不配置会影响使用</p><p>第25行在选择GPT-SoVITS可以不用配置</p><h4 id="如果你的显卡较好推荐使用gpt-sovits语音合成" tabindex="-1"><a class="header-anchor" href="#如果你的显卡较好推荐使用gpt-sovits语音合成"><span>如果你的显卡较好推荐<a class="route-link" href="/deploy-docs/TTS_GPTSoVITS.html">使用GPT-SoVITS语音合成</a></span></a></h4><h4 id="硅基流动的详细使用说明" tabindex="-1"><a class="header-anchor" href="#硅基流动的详细使用说明"><span><a class="route-link" href="/deploy-docs/TTS_SIL.html">硅基流动的详细使用说明</a></span></a></h4><h3 id="🚀-docker-优势" tabindex="-1"><a class="header-anchor" href="#🚀-docker-优势"><span>🚀 Docker 优势</span></a></h3><ul><li><strong>一键部署</strong>：无需手动安装依赖，自动配置环境</li><li><strong>环境隔离</strong>：避免与其他应用冲突</li><li><strong>跨平台</strong>：支持 Linux、Windows、macOS</li><li><strong>易于管理</strong>：统一的启动、停止、重启命令</li><li><strong>生产就绪</strong>：包含健康检查和自动重启</li><li><strong>资源限制</strong>：可控制内存和CPU使用</li></ul><h3 id="📋-环境要求" tabindex="-1"><a class="header-anchor" href="#📋-环境要求"><span>📋 环境要求</span></a></h3><h4 id="docker-环境" tabindex="-1"><a class="header-anchor" href="#docker-环境"><span>Docker 环境</span></a></h4><ul><li>Docker 20.10+</li><li>Docker Compose 2.0+</li><li>2GB+ 可用内存</li><li>1GB+ 可用存储空间</li></ul><h4 id="传统环境" tabindex="-1"><a class="header-anchor" href="#传统环境"><span>传统环境</span></a></h4><ul><li>Python 3.10+</li><li>硬盘空间 500MB+</li><li>网络连接（用于API调用）</li></ul><h2 id="使用说明" tabindex="-1"><a class="header-anchor" href="#使用说明"><span>使用说明</span></a></h2><h3 id="启动应用" tabindex="-1"><a class="header-anchor" href="#启动应用"><span>启动应用</span></a></h3><h4 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h4><p>双击 <code>start.bat</code> 文件或在命令行中运行：</p><div class="language-cmd line-numbers-mode" data-highlighter="prismjs" data-ext="cmd"><pre><code><span class="line">start.bat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="linux-macos" tabindex="-1"><a class="header-anchor" href="#linux-macos"><span>Linux/macOS</span></a></h4><p>确保脚本有执行权限：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">chmod</span> +x start.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后运行：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">./start.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="高级选项" tabindex="-1"><a class="header-anchor" href="#高级选项"><span>高级选项</span></a></h4><p>你也可以直接使用Python启动脚本，并传递额外的参数：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">python start.py <span class="token parameter variable">--host</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">--port</span> <span class="token number">8080</span> <span class="token parameter variable">--debug</span> --no-browser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可用参数：</p><ul><li><code>--host</code>: 指定主机地址（默认为配置文件中的值）</li><li><code>--port</code>: 指定端口号（默认为配置文件中的值）</li><li><code>--debug</code>: 启用调试模式</li><li><code>--no-browser</code>: 不自动打开浏览器</li></ul><p>启动后，应用会自动在浏览器中打开。程序会智能选择最合适的本地IP地址（优先使用192.168开头的地址），确保在各种浏览器中都能正常访问。</p><p>你也可以手动访问以下地址：</p><ul><li>本地访问：<code>http://localhost:5000</code> 或 <code>http://127.0.0.1:5000</code></li><li>局域网访问：<code>http://[你的本地IP]:5000</code>（启动时会显示具体地址）</li></ul><h3 id="基本操作" tabindex="-1"><a class="header-anchor" href="#基本操作"><span>基本操作</span></a></h3><ul><li><strong>发送消息</strong>：在右上角输入框中输入消息，点击&quot;发送&quot;按钮或按回车键发送</li><li><strong>查看历史</strong>：点击&quot;历史&quot;按钮查看完整对话历史</li><li><strong>切换角色</strong>：点击&quot;角色&quot;按钮选择不同的AI角色</li><li><strong>播放语音</strong>：点击&quot;播放语音&quot;按钮再次播放语音</li><li><strong>更换背景</strong>：点击&quot;更换背景&quot;按钮生成新的背景图片</li><li><strong>自动/手动模式</strong>：点击&quot;自动&quot;按钮切换打字机效果的自动/手动模式</li><li><strong>跳过打字</strong>：在自动模式下，点击&quot;跳过&quot;按钮可以立即显示完整回复</li></ul><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ul><li>图像API生成的图片URL有效期为一小时，应用会自动下载并存储图片</li><li>默认情况下，应用会清理超过24小时的旧图片，最多保留20张图片</li><li>如果图像API调用失败，应用会使用缓存的图片作为背景</li><li>角色图片需要放置在<code>static/images/</code>目录下，并在角色配置文件中指定路径</li><li>默认角色设置在<code>characters/__init__.py</code>文件中的<code>_default_character_id</code>变量</li></ul><h2 id="自定义角色" tabindex="-1"><a class="header-anchor" href="#自定义角色"><span>自定义角色</span></a></h2><p>你可以通过创建新的角色配置文件来添加自定义角色。在<code>characters/</code>目录下创建一个新的Python文件，按照以下格式定义角色：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 角色基本信息</span></span>
<span class="line">CHARACTER_ID <span class="token operator">=</span> <span class="token string">&quot;your_character_id&quot;</span></span>
<span class="line">CHARACTER_NAME <span class="token operator">=</span> <span class="token string">&quot;角色名称&quot;</span></span>
<span class="line">CHARACTER_NAME_EN <span class="token operator">=</span> <span class="token string">&quot;Character Name&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 角色外观</span></span>
<span class="line">CHARACTER_IMAGE <span class="token operator">=</span> <span class="token string">&quot;static/images/your_character/&quot;</span>  <span class="token comment"># 角色立绘目录</span></span>
<span class="line">CHARACTER_COLOR <span class="token operator">=</span> <span class="token string">&quot;#ffeb3b&quot;</span>  <span class="token comment"># 角色名称颜色</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 角色设定</span></span>
<span class="line">CHARACTER_DESCRIPTION <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">角色的简短描述</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># AI系统提示词</span></span>
<span class="line">CHARACTER_PROMPT <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">详细的角色设定和提示词，用于指导AI生成符合角色特点的回复</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 角色欢迎语</span></span>
<span class="line">CHARACTER_WELCOME <span class="token operator">=</span> <span class="token string">&quot;角色的欢迎语&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 角色对话示例</span></span>
<span class="line">CHARACTER_EXAMPLES <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;示例问题1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;assistant&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;示例回答1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment"># 更多示例...</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 获取角色配置</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">get_character_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;获取角色配置&quot;&quot;&quot;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span> CHARACTER_ID<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> CHARACTER_NAME<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;name_en&quot;</span><span class="token punctuation">:</span> CHARACTER_NAME_EN<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;image&quot;</span><span class="token punctuation">:</span> CHARACTER_IMAGE<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> CHARACTER_COLOR<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> CHARACTER_DESCRIPTION<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;prompt&quot;</span><span class="token punctuation">:</span> CHARACTER_PROMPT<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">:</span> CHARACTER_WELCOME<span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&quot;examples&quot;</span><span class="token punctuation">:</span> CHARACTER_EXAMPLES</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="贡献-按周结算没有并不代表没有" tabindex="-1"><a class="header-anchor" href="#贡献-按周结算没有并不代表没有"><span>贡献，按周结算没有并不代表没有</span></a></h2><p><a href="https://github.com/xhc2008/CABM/graphs/contributors" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/contributors/xhc2008/CABM?color=blue" alt="Contributors"></a></p><p><img src="https://contrib.rocks/image?repo=xhc2008/CABM" alt="Contributors"></p><p>欢迎提交 Pull Request 或 Issue！<s>(但不一定会做)</s></p><p>具体贡献流程请参考<a class="route-link" href="/CONTRIBUTING.html">CONTRIBUTING.md</a></p><h2 id="📚-文档索引" tabindex="-1"><a class="header-anchor" href="#📚-文档索引"><span>📚 文档索引</span></a></h2><h3 id="部署文档" tabindex="-1"><a class="header-anchor" href="#部署文档"><span>部署文档</span></a></h3><ul><li><a class="route-link" href="/deploy-docs/DOCKER_PULL_GUIDE.html">📖 Docker 镜像直接拉取部署指南</a> - <strong>推荐：无需源码，直接拉取镜像部署</strong></li><li><a class="route-link" href="/deploy-docs/WINDOWS_DEPLOY_GUIDE.html">Windows 部署指南</a> - Windows 环境部署</li><li><a class="route-link" href="/deploy-docs/DOCKER_SOLUTION.html">Docker 问题解决方案</a> - 常见问题及解决方案</li></ul><h3 id="功能文档" tabindex="-1"><a class="header-anchor" href="#功能文档"><span>功能文档</span></a></h3><ul><li><a class="route-link" href="/deploy-docs/TTS_GPTSoVITS.html">TTS GPT-SoVITS 配置</a> - 语音合成服务配置</li></ul><h3 id="开发文档" tabindex="-1"><a class="header-anchor" href="#开发文档"><span>开发文档</span></a></h3><ul><li><a class="route-link" href="/CONTRIBUTING.html">贡献指南</a> - 如何参与项目开发</li></ul><h2 id="许可证" tabindex="-1"><a class="header-anchor" href="#许可证"><span>许可证</span></a></h2><p><a href="LICENSE">GNU General Public License v3.0</a></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-08-05T04:57:10.000Z" data-allow-mismatch>2025/8/5 04:57</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2302_76329346@noreply.gitcode.com">2302_76329346</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DUMTNEXb.js" defer></script>
  </body>
</html>
