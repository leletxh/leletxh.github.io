<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>CABM Docker éƒ¨ç½²æ–‡æ¡£ | CABM</title><meta name="description" content="Code Afflatus & Beyond Matter">
    <link rel="preload" href="/assets/style-B3-VMakp.css" as="style"><link rel="stylesheet" href="/assets/style-B3-VMakp.css">
    <link rel="modulepreload" href="/assets/app-DtjoBmZ8.js"><link rel="modulepreload" href="/assets/DOCKER_DEPLOYMENT.html-C1divMWC.js">
    <link rel="prefetch" href="/assets/index.html-DtVrwbO-.js" as="script"><link rel="prefetch" href="/assets/get-started.html-D2I7jfLO.js" as="script"><link rel="prefetch" href="/assets/DEPLOYMENT_CHECKLIST.html-CDxOayTK.js" as="script"><link rel="prefetch" href="/assets/DOCKER_DEPLOY_GUIDE.html-CtuXrLo7.js" as="script"><link rel="prefetch" href="/assets/DOCKER_PULL_GUIDE.html-BLSwvSBR.js" as="script"><link rel="prefetch" href="/assets/DOCKER_SOLUTION.html-Dr_uPA5W.js" as="script"><link rel="prefetch" href="/assets/TTS_GPTSoVITS.html-sW5O6OqZ.js" as="script"><link rel="prefetch" href="/assets/WINDOWS_DEPLOY_GUIDE.html--kA2U2Ny.js" as="script"><link rel="prefetch" href="/assets/404.html-BYQGeVHG.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="CABM"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">CABM</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="CABM"><!--[--><!--[--><!--]--><!--]-->CABM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/get-started.html" aria-label="å¿«é€Ÿå¼€å§‹"><!--[--><!--[--><!--]--><!--]-->å¿«é€Ÿå¼€å§‹<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="CABM"><!--[--><!--[--><!--]--><!--]-->CABM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/get-started.html" aria-label="å¿«é€Ÿå¼€å§‹"><!--[--><!--[--><!--]--><!--]-->å¿«é€Ÿå¼€å§‹<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">CABM Docker éƒ¨ç½²æ–‡æ¡£ <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="cabm-docker-éƒ¨ç½²æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#cabm-docker-éƒ¨ç½²æ–‡æ¡£"><span>CABM Docker éƒ¨ç½²æ–‡æ¡£</span></a></h1><h2 id="ğŸ“‹-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ“‹-æ¦‚è¿°"><span>ğŸ“‹ æ¦‚è¿°</span></a></h2><p>æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ CABM é¡¹ç›®æä¾›çš„ Docker è„šæ‰‹æ¶å·¥å…·è¿›è¡Œå¼€å‘ã€éƒ¨ç½²å’Œå‘å¸ƒã€‚æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒè„šæœ¬æ¥ç®€åŒ– Docker æ“ä½œï¼š</p><ul><li><strong><code>deploy-docker.sh</code></strong> - æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²ç®¡ç†</li><li><strong><code>release.sh</code></strong> - é•œåƒæ„å»ºå’Œå‘å¸ƒåˆ°æ³¨å†Œè¡¨</li></ul><h2 id="ğŸ› ï¸-ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-ç¯å¢ƒå‡†å¤‡"><span>ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡</span></a></h2><h3 id="ç³»ç»Ÿè¦æ±‚" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿè¦æ±‚"><span>ç³»ç»Ÿè¦æ±‚</span></a></h3><ul><li>Docker 20.10+</li><li>Docker Buildx (å¤šæ¶æ„æ„å»ºæ”¯æŒ)</li><li>Git (ç”¨äºç‰ˆæœ¬ä¿¡æ¯)</li><li>Linux/macOS/Windows(WSL2)</li></ul><h3 id="å®‰è£…-docker" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-docker"><span>å®‰è£… Docker</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># Ubuntu/Debian</span></span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://get.docker.com <span class="token parameter variable">-o</span> get-docker.sh</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh</span>
<span class="line"></span>
<span class="line"><span class="token comment"># macOS</span></span>
<span class="line">brew <span class="token function">install</span> <span class="token function">docker</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Windows</span></span>
<span class="line"><span class="token comment"># ä¸‹è½½ Docker Desktop: https://www.docker.com/products/docker-desktop</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯ç”¨-docker-buildx" tabindex="-1"><a class="header-anchor" href="#å¯ç”¨-docker-buildx"><span>å¯ç”¨ Docker Buildx</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># å®‰è£… buildx æ’ä»¶</span></span>
<span class="line"><span class="token function">docker</span> buildx <span class="token function">install</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºå¤šæ¶æ„æ„å»ºå™¨</span></span>
<span class="line"><span class="token function">docker</span> buildx create <span class="token parameter variable">--name</span> multiarch <span class="token parameter variable">--driver</span> docker-container <span class="token parameter variable">--use</span></span>
<span class="line"><span class="token function">docker</span> buildx inspect <span class="token parameter variable">--bootstrap</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”§-é…ç½®ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#ğŸ”§-é…ç½®ç¯å¢ƒå˜é‡"><span>ğŸ”§ é…ç½®ç¯å¢ƒå˜é‡</span></a></h2><h3 id="åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶"><span>åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶</span></a></h3><p>å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶å¹¶å¡«å…¥æ‚¨çš„ API å¯†é’¥ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">cp</span> .env.example .env</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ç¼–è¾‘-env-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–è¾‘-env-æ–‡ä»¶"><span>ç¼–è¾‘ .env æ–‡ä»¶</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># å¿…éœ€é…ç½® - API å¯†é’¥</span></span>
<span class="line"><span class="token assign-left variable">CHAT_API_KEY</span><span class="token operator">=</span>your_api_key_here</span>
<span class="line"><span class="token assign-left variable">IMAGE_API_KEY</span><span class="token operator">=</span>your_api_key_here</span>
<span class="line"><span class="token assign-left variable">TTS_SERVICE_API_KEY</span><span class="token operator">=</span>your_api_key_here</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¯é€‰é…ç½®</span></span>
<span class="line"><span class="token assign-left variable">DEBUG</span><span class="token operator">=</span>false</span>
<span class="line"><span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0</span>
<span class="line"><span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">5000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>è¯·å°† <code>your_api_key_here</code> æ›¿æ¢ä¸ºæ‚¨çš„çœŸå® API å¯†é’¥</li><li>ä¸è¦å°†åŒ…å«çœŸå®å¯†é’¥çš„ <code>.env</code> æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li><li>ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Docker Secrets æˆ–ç¯å¢ƒå˜é‡æ³¨å…¥</li></ul><h2 id="ğŸš€-æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ğŸš€-æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²"><span>ğŸš€ æœ¬åœ°å¼€å‘å’Œéƒ¨ç½²</span></a></h2><h3 id="ä½¿ç”¨-deploy-docker-sh" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-deploy-docker-sh"><span>ä½¿ç”¨ deploy-docker.sh</span></a></h3><p>è¿™æ˜¯æ‚¨çš„ä¸»è¦å¼€å‘å·¥å…·ï¼Œæä¾›å®Œæ•´çš„å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><h4 id="åŸºæœ¬å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬å‘½ä»¤"><span>åŸºæœ¬å‘½ä»¤</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span></span>
<span class="line">./deploy-docker.sh <span class="token parameter variable">--help</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰</span></span>
<span class="line">./deploy-docker.sh deploy</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¿«é€Ÿæ„å»ºéƒ¨ç½²</span></span>
<span class="line">./deploy-docker.sh deploy <span class="token parameter variable">--fast</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ„å»ºé•œåƒ" tabindex="-1"><a class="header-anchor" href="#æ„å»ºé•œåƒ"><span>æ„å»ºé•œåƒ</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ ‡å‡†æ„å»º</span></span>
<span class="line">./deploy-docker.sh build</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç½‘ç»œä¼˜åŒ–æ„å»ºï¼ˆä½¿ç”¨å›½å†…é•œåƒæºï¼‰</span></span>
<span class="line">./deploy-docker.sh build <span class="token parameter variable">--fast</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ— ç¼“å­˜æ„å»º</span></span>
<span class="line">./deploy-docker.sh build --no-cache</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®¹å™¨ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨ç®¡ç†"><span>å®¹å™¨ç®¡ç†</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># è¿è¡Œå®¹å™¨</span></span>
<span class="line">./deploy-docker.sh run</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åå°è¿è¡Œ</span></span>
<span class="line">./deploy-docker.sh run <span class="token parameter variable">-d</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŒ‡å®šç«¯å£</span></span>
<span class="line">./deploy-docker.sh run <span class="token parameter variable">--port</span> <span class="token number">8080</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¯åŠ¨/åœæ­¢/é‡å¯</span></span>
<span class="line">./deploy-docker.sh start</span>
<span class="line">./deploy-docker.sh stop  </span>
<span class="line">./deploy-docker.sh restart</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç›‘æ§å’Œè°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§å’Œè°ƒè¯•"><span>ç›‘æ§å’Œè°ƒè¯•</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æŸ¥çœ‹å®¹å™¨çŠ¶æ€</span></span>
<span class="line">./deploy-docker.sh status</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span></span>
<span class="line">./deploy-docker.sh logs <span class="token parameter variable">-f</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿›å…¥å®¹å™¨ Shell</span></span>
<span class="line">./deploy-docker.sh shell</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—</span></span>
<span class="line">./deploy-docker.sh logs <span class="token parameter variable">--tail</span> <span class="token number">100</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¸…ç†" tabindex="-1"><a class="header-anchor" href="#æ¸…ç†"><span>æ¸…ç†</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ¸…ç†å®¹å™¨å’Œé•œåƒ</span></span>
<span class="line">./deploy-docker.sh clean</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¼€å‘å·¥ä½œæµç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å¼€å‘å·¥ä½œæµç¤ºä¾‹"><span>å¼€å‘å·¥ä½œæµç¤ºä¾‹</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 1. é¦–æ¬¡è®¾ç½®</span></span>
<span class="line"><span class="token function">cp</span> .env.example .env</span>
<span class="line"><span class="token comment"># ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ API å¯†é’¥</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. ä¸€é”®éƒ¨ç½²</span></span>
<span class="line">./deploy-docker.sh deploy <span class="token parameter variable">--fast</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. æŸ¥çœ‹åº”ç”¨çŠ¶æ€</span></span>
<span class="line">./deploy-docker.sh status</span>
<span class="line">./deploy-docker.sh logs <span class="token parameter variable">-f</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4. ä»£ç ä¿®æ”¹åæ›´æ–°</span></span>
<span class="line">./deploy-docker.sh update <span class="token parameter variable">--fast</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5. è°ƒè¯•é—®é¢˜</span></span>
<span class="line">./deploy-docker.sh shell</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“¦-é•œåƒå‘å¸ƒ" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦-é•œåƒå‘å¸ƒ"><span>ğŸ“¦ é•œåƒå‘å¸ƒ</span></a></h2><h3 id="ä½¿ç”¨-release-sh" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-release-sh"><span>ä½¿ç”¨ release.sh</span></a></h3><p>ä¸“é—¨ç”¨äºæ„å»ºå¤šæ¶æ„é•œåƒå¹¶å‘å¸ƒåˆ°å„ç§æ³¨å†Œè¡¨ã€‚</p><h4 id="åŸºæœ¬å‘å¸ƒ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬å‘å¸ƒ"><span>åŸºæœ¬å‘å¸ƒ</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ˜¾ç¤ºå¸®åŠ©</span></span>
<span class="line">./release.sh <span class="token parameter variable">--help</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ„å»ºä½†ä¸æ¨é€ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰</span></span>
<span class="line">./release.sh</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ„å»ºå¹¶æ¨é€åˆ°æ‰€æœ‰æ³¨å†Œè¡¨</span></span>
<span class="line">./release.sh <span class="token parameter variable">--push</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å‘å¸ƒç‰¹å®šç‰ˆæœ¬</span></span>
<span class="line">./release.sh <span class="token parameter variable">-v</span> <span class="token number">1.0</span>.0 <span class="token parameter variable">--push</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é«˜çº§å‘å¸ƒé€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#é«˜çº§å‘å¸ƒé€‰é¡¹"><span>é«˜çº§å‘å¸ƒé€‰é¡¹</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># å‘å¸ƒåˆ°ç‰¹å®šæ³¨å†Œè¡¨</span></span>
<span class="line">./release.sh <span class="token parameter variable">-r</span> docker.io <span class="token parameter variable">--push</span></span>
<span class="line">./release.sh <span class="token parameter variable">-r</span> ghcr.io <span class="token parameter variable">--push</span></span>
<span class="line">./release.sh <span class="token parameter variable">-r</span> registry.cn-hangzhou.aliyuncs.com <span class="token parameter variable">--push</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ„å»ºç‰¹å®šå¹³å°</span></span>
<span class="line">./release.sh <span class="token parameter variable">-p</span> linux/amd64 <span class="token parameter variable">--push</span></span>
<span class="line">./release.sh <span class="token parameter variable">-p</span> linux/arm64 <span class="token parameter variable">--push</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é¢„è§ˆå‘å¸ƒå‘½ä»¤</span></span>
<span class="line">./release.sh --dry-run <span class="token parameter variable">--push</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ”¯æŒçš„æ³¨å†Œè¡¨" tabindex="-1"><a class="header-anchor" href="#æ”¯æŒçš„æ³¨å†Œè¡¨"><span>æ”¯æŒçš„æ³¨å†Œè¡¨</span></a></h3><table><thead><tr><th>æ³¨å†Œè¡¨</th><th>åœ°å€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Docker Hub</td><td>docker.io</td><td>æœ€æµè¡Œçš„å…¬å…±æ³¨å†Œè¡¨</td></tr><tr><td>GitHub Container Registry</td><td>ghcr.io</td><td>GitHub é›†æˆæ³¨å†Œè¡¨</td></tr><tr><td>é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</td><td>registry.cn-hangzhou.aliyuncs.com</td><td>ä¸­å›½å¤§é™†è®¿é—®å‹å¥½</td></tr></tbody></table><h3 id="æ³¨å†Œè¡¨è®¤è¯" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œè¡¨è®¤è¯"><span>æ³¨å†Œè¡¨è®¤è¯</span></a></h3><h4 id="docker-hub" tabindex="-1"><a class="header-anchor" href="#docker-hub"><span>Docker Hub</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">DOCKER_USERNAME</span><span class="token operator">=</span>your_username</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">DOCKER_PASSWORD</span><span class="token operator">=</span>your_password</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="github-container-registry" tabindex="-1"><a class="header-anchor" href="#github-container-registry"><span>GitHub Container Registry</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">GITHUB_ACTOR</span><span class="token operator">=</span>your_github_username</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">GITHUB_TOKEN</span><span class="token operator">=</span>your_github_token</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"><span>é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">ALIYUN_USERNAME</span><span class="token operator">=</span>your_aliyun_username</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">ALIYUN_PASSWORD</span><span class="token operator">=</span>your_aliyun_password</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">ALIYUN_NAMESPACE</span><span class="token operator">=</span>your_namespace</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‘å¸ƒå·¥ä½œæµç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒå·¥ä½œæµç¤ºä¾‹"><span>å‘å¸ƒå·¥ä½œæµç¤ºä¾‹</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 1. è®¾ç½®è®¤è¯ä¿¡æ¯</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">DOCKER_USERNAME</span><span class="token operator">=</span>myusername</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">DOCKER_PASSWORD</span><span class="token operator">=</span>mypassword</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. æœ¬åœ°æµ‹è¯•æ„å»º</span></span>
<span class="line">./release.sh <span class="token parameter variable">-v</span> <span class="token number">1.0</span>.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. å‘å¸ƒåˆ° Docker Hub</span></span>
<span class="line">./release.sh <span class="token parameter variable">-v</span> <span class="token number">1.0</span>.0 <span class="token parameter variable">-r</span> docker.io <span class="token parameter variable">--push</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4. å‘å¸ƒåˆ°æ‰€æœ‰æ³¨å†Œè¡¨</span></span>
<span class="line">./release.sh <span class="token parameter variable">-v</span> <span class="token number">1.0</span>.0 <span class="token parameter variable">--push</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5. å‘å¸ƒå¼€å‘ç‰ˆæœ¬ï¼ˆä¸æ ‡è®°ä¸ºlatestï¼‰</span></span>
<span class="line">./release.sh <span class="token parameter variable">-v</span> dev-20250103 --no-latest <span class="token parameter variable">--push</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”„-ci-cd-é›†æˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ”„-ci-cd-é›†æˆ"><span>ğŸ”„ CI/CD é›†æˆ</span></a></h2><h3 id="github-actions" tabindex="-1"><a class="header-anchor" href="#github-actions"><span>GitHub Actions</span></a></h3><p>æˆ‘ä»¬å·²ç»ä¸ºæ‚¨å‡†å¤‡äº† GitHub Actions é…ç½®æ–‡ä»¶ï¼ˆ<code>.github/workflows/docker.yml</code>ï¼‰ï¼Œæ”¯æŒï¼š</p><ul><li>è‡ªåŠ¨å¤šæ¶æ„æ„å»º</li><li>å‘å¸ƒåˆ°å¤šä¸ªæ³¨å†Œè¡¨</li><li>ç‰ˆæœ¬æ ‡ç­¾ç®¡ç†</li><li>Pull Request æ„å»ºæµ‹è¯•</li></ul><h3 id="æ‰‹åŠ¨è§¦å‘å‘å¸ƒ" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨è§¦å‘å‘å¸ƒ"><span>æ‰‹åŠ¨è§¦å‘å‘å¸ƒ</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•</span></span>
<span class="line"><span class="token function">git</span> tag v1.0.0</span>
<span class="line"><span class="token function">git</span> push origin v1.0.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æˆ–è€…æ‰‹åŠ¨è§¦å‘ workflow</span></span>
<span class="line"><span class="token comment"># åœ¨ GitHub ä»“åº“é¡µé¢ -&gt; Actions -&gt; é€‰æ‹© workflow -&gt; Run workflow</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“-ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ğŸ“-ç›®å½•ç»“æ„"><span>ğŸ“ ç›®å½•ç»“æ„</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">CABM/</span>
<span class="line">â”œâ”€â”€ deploy-docker.sh          # å¼€å‘éƒ¨ç½²è„šæœ¬</span>
<span class="line">â”œâ”€â”€ release.sh               # é•œåƒå‘å¸ƒè„šæœ¬</span>
<span class="line">â”œâ”€â”€ Dockerfile              # Docker é•œåƒæ„å»ºæ–‡ä»¶</span>
<span class="line">â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®</span>
<span class="line">â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®</span>
<span class="line">â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿</span>
<span class="line">â”œâ”€â”€ .dockerignore           # Docker å¿½ç•¥æ–‡ä»¶</span>
<span class="line">â””â”€â”€ .github/</span>
<span class="line">    â””â”€â”€ workflows/</span>
<span class="line">        â””â”€â”€ docker.yml      # GitHub Actions CI/CD</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ›-å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#ğŸ›-å¸¸è§é—®é¢˜"><span>ğŸ› å¸¸è§é—®é¢˜</span></a></h2><h3 id="_1-ç«¯å£è¢«å ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-ç«¯å£è¢«å ç”¨"><span>1. ç«¯å£è¢«å ç”¨</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># é—®é¢˜ï¼šError: Port 5000 is already in use</span></span>
<span class="line"><span class="token comment"># è§£å†³ï¼š</span></span>
<span class="line">./deploy-docker.sh run <span class="token parameter variable">--port</span> <span class="token number">8080</span></span>
<span class="line"><span class="token comment"># æˆ–è€…åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">lsof</span> <span class="token parameter variable">-ti:5000</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-docker-æƒé™é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-docker-æƒé™é—®é¢˜"><span>2. Docker æƒé™é—®é¢˜</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># é—®é¢˜ï¼šPermission denied while trying to connect to Docker daemon</span></span>
<span class="line"><span class="token comment"># è§£å†³ï¼šå°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span></span>
<span class="line"><span class="token comment"># é‡æ–°ç™»å½•ç”Ÿæ•ˆ</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-é•œåƒæ„å»ºå¤±è´¥" tabindex="-1"><a class="header-anchor" href="#_3-é•œåƒæ„å»ºå¤±è´¥"><span>3. é•œåƒæ„å»ºå¤±è´¥</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ¸…ç†å¹¶é‡è¯•</span></span>
<span class="line">./deploy-docker.sh clean</span>
<span class="line">./deploy-docker.sh build --no-cache</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-ç½‘ç»œé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-ç½‘ç»œé—®é¢˜"><span>4. ç½‘ç»œé—®é¢˜</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># ä½¿ç”¨å›½å†…é•œåƒæº</span></span>
<span class="line">./deploy-docker.sh build <span class="token parameter variable">--fast</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-å®¹å™¨å¯åŠ¨å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#_5-å®¹å™¨å¯åŠ¨å¤±è´¥"><span>5. å®¹å™¨å¯åŠ¨å¤±è´¥</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</span></span>
<span class="line">./deploy-docker.sh logs</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿›å…¥å®¹å™¨è°ƒè¯•</span></span>
<span class="line">./deploy-docker.sh shell</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-api-å¯†é’¥é…ç½®é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_6-api-å¯†é’¥é…ç½®é”™è¯¯"><span>6. API å¯†é’¥é…ç½®é”™è¯¯</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ£€æŸ¥ç¯å¢ƒå˜é‡</span></span>
<span class="line">./deploy-docker.sh shell</span>
<span class="line"><span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> API</span>
<span class="line"></span>
<span class="line"><span class="token comment"># é‡æ–°é…ç½® .env æ–‡ä»¶</span></span>
<span class="line"><span class="token function">cp</span> .env.example .env</span>
<span class="line"><span class="token comment"># ç¼–è¾‘ .env å¹¶é‡æ–°éƒ¨ç½²</span></span>
<span class="line">./deploy-docker.sh update</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ“Š-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ğŸ“Š-æ€§èƒ½ä¼˜åŒ–"><span>ğŸ“Š æ€§èƒ½ä¼˜åŒ–</span></a></h2><h3 id="æ„å»ºä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#æ„å»ºä¼˜åŒ–"><span>æ„å»ºä¼˜åŒ–</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># ä½¿ç”¨ .dockerignore å‡å°‘æ„å»ºä¸Šä¸‹æ–‡</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;node_modules/&quot;</span> <span class="token operator">&gt;&gt;</span> .dockerignore</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;*.log&quot;</span> <span class="token operator">&gt;&gt;</span> .dockerignore</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼ˆå·²åœ¨ Dockerfile ä¸­é…ç½®ï¼‰</span></span>
<span class="line"><span class="token comment"># ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ</span></span>
<span class="line">./deploy-docker.sh build <span class="token parameter variable">--fast</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿è¡Œä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œä¼˜åŒ–"><span>è¿è¡Œä¼˜åŒ–</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># é™åˆ¶å®¹å™¨èµ„æºä½¿ç”¨</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">--memory</span><span class="token operator">=</span>1g <span class="token parameter variable">--cpus</span><span class="token operator">=</span><span class="token number">1</span> cabm:latest</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä½¿ç”¨æ•°æ®å·æŒä¹…åŒ–æ•°æ®</span></span>
<span class="line"><span class="token comment"># ï¼ˆdeploy-docker.sh å·²è‡ªåŠ¨é…ç½®ï¼‰</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ”’-å®‰å…¨æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#ğŸ”’-å®‰å…¨æœ€ä½³å®è·µ"><span>ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ</span></a></h2><ol><li><p><strong>ç¯å¢ƒå˜é‡å®‰å…¨</strong></p><ul><li>ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥</li><li>ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯</li><li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Docker Secrets</li></ul></li><li><p><strong>é•œåƒå®‰å…¨</strong></p><ul><li>å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ</li><li>ä½¿ç”¨å®˜æ–¹é•œåƒ</li><li>æ‰«æé•œåƒæ¼æ´</li></ul></li><li><p><strong>ç½‘ç»œå®‰å…¨</strong></p><ul><li>ä»…æš´éœ²å¿…è¦ç«¯å£</li><li>ä½¿ç”¨åå‘ä»£ç†</li><li>é…ç½®é˜²ç«å¢™è§„åˆ™</li></ul></li></ol><h2 id="ğŸ“–-è¿›é˜¶ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ğŸ“–-è¿›é˜¶ç”¨æ³•"><span>ğŸ“– è¿›é˜¶ç”¨æ³•</span></a></h2><h3 id="è‡ªå®šä¹‰æ„å»ºå‚æ•°" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ„å»ºå‚æ•°"><span>è‡ªå®šä¹‰æ„å»ºå‚æ•°</span></a></h3><p>ç¼–è¾‘ <code>Dockerfile</code> æ·»åŠ æ„å»ºå‚æ•°ï¼š</p><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker"><pre><code><span class="line"><span class="token instruction"><span class="token keyword">ARG</span> CUSTOM_VERSION=latest</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">ARG</span> BUILD_ENV=production</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è„šæœ¬ä¸­ä½¿ç”¨ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># ä¿®æ”¹ deploy-docker.sh æˆ– release.sh</span></span>
<span class="line"><span class="token function">docker</span> build --build-arg <span class="token assign-left variable">CUSTOM_VERSION</span><span class="token operator">=</span><span class="token number">1.0</span>.0 <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤šç¯å¢ƒéƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#å¤šç¯å¢ƒéƒ¨ç½²"><span>å¤šç¯å¢ƒéƒ¨ç½²</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># å¼€å‘ç¯å¢ƒ</span></span>
<span class="line">./deploy-docker.sh run --env-file .env.dev</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æµ‹è¯•ç¯å¢ƒ  </span></span>
<span class="line">./deploy-docker.sh run --env-file .env.test</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿäº§ç¯å¢ƒ</span></span>
<span class="line">./deploy-docker.sh run --env-file .env.prod</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›‘æ§é›†æˆ" tabindex="-1"><a class="header-anchor" href="#ç›‘æ§é›†æˆ"><span>ç›‘æ§é›†æˆ</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># æ·»åŠ å¥åº·æ£€æŸ¥</span></span>
<span class="line"><span class="token comment"># ï¼ˆå·²åœ¨ Dockerfile ä¸­é…ç½®ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é›†æˆ Prometheus ç›‘æ§</span></span>
<span class="line"><span class="token comment"># åœ¨ docker-compose.yml ä¸­æ·»åŠ ç›‘æ§æœåŠ¡</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ğŸ¤-è´¡çŒ®æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#ğŸ¤-è´¡çŒ®æŒ‡å—"><span>ğŸ¤ è´¡çŒ®æŒ‡å—</span></a></h2><p>å¦‚æœæ‚¨æƒ³æ”¹è¿›è¿™äº›è„šæœ¬ï¼š</p><ol><li>Fork é¡¹ç›®</li><li>åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š<code>git checkout -b feature/amazing-feature</code></li><li>æäº¤æ›´æ”¹ï¼š<code>git commit -m &#39;Add amazing feature&#39;</code></li><li>æ¨é€åˆ†æ”¯ï¼š<code>git push origin feature/amazing-feature</code></li><li>åˆ›å»º Pull Request</li></ol><h2 id="ğŸ“-æŠ€æœ¯æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#ğŸ“-æŠ€æœ¯æ”¯æŒ"><span>ğŸ“ æŠ€æœ¯æ”¯æŒ</span></a></h2><p>å¦‚æœé‡åˆ°é—®é¢˜ï¼š</p><ol><li>æŸ¥çœ‹æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†</li><li>æ£€æŸ¥é¡¹ç›®çš„ GitHub Issues</li><li>åœ¨ GitHub ä¸Šåˆ›å»ºæ–°çš„ Issue</li></ol><hr><p><strong>ğŸ‰ ç°åœ¨æ‚¨å·²ç»æŒæ¡äº† CABM Docker éƒ¨ç½²çš„å…¨éƒ¨æŠ€èƒ½ï¼å¼€å§‹æ‚¨çš„å®¹å™¨åŒ–ä¹‹æ—…å§ï¼</strong></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">æœ€è¿‘æ›´æ–°ï¼š: </span><time class="meta-item-info" datetime="2025-08-04T11:29:52.000Z" data-allow-mismatch>2025/8/4 11:29</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2302_76329346@noreply.gitcode.com">2302_76329346</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DtjoBmZ8.js" defer></script>
  </body>
</html>
